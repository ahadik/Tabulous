{"version":3,"sources":["webpack:///webpack/bootstrap a74ecff5dd438360d155","webpack:///./app.js","webpack:///external \"express\"","webpack:///external \"cfenv\"","webpack:///external \"path\"","webpack:///external \"body-parser\"","webpack:///external \"mongoose\"","webpack:///external \"passport\"","webpack:///external \"connect-flash\"","webpack:///external \"express-session\"","webpack:///external \"fs\"","webpack:///external \"babel-core/register\"","webpack:///external \"source-map-support\"","webpack:///./vcap-local.js","webpack:///./modules/config/database.js","webpack:///./modules/config/passport.js","webpack:///external \"passport-facebook\"","webpack:///./modules/models/user.js","webpack:///external \"bcrypt-nodejs\"","webpack:///./modules/config/auth.js","webpack:///external \"skipper\"","webpack:///./routes.js","webpack:///./modules/object_storage/index.js","webpack:///external \"request\"","webpack:///external \"mime-types\"","webpack:///external \"crypto\"","webpack:///external \"pkgcloud\"","webpack:///external \"skipper-openstack\"","webpack:///./modules/conversion/index.js","webpack:///external \"librsvg\"","webpack:///external \"stream\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a74ecff5dd438360d155\n **/","var express = require('express'),\n    cfenv = require('cfenv'),\n    path = require('path'),\n    bodyParser = require('body-parser'),\n    mongoose = require('mongoose'),\n    passport = require('passport'),\n    flash = require('connect-flash'),\n    //cookieParser = require('cookie-parser'),\n    session = require('express-session'),\n    fs = require('fs');\n    require('babel-core/register');\n\nrequire('source-map-support').install();\n\nvar vcapLocal = null\ntry {\n  vcapLocal = require(\"./vcap-local.js\");\n}catch (e) {}\n\nvar appEnvOpts = vcapLocal ? {vcap:vcapLocal} : {};\n\nvar app = express(),\n    appEnv = cfenv.getAppEnv(appEnvOpts);\n\nvar softlayerObjStoreCreds = appEnv.getServiceCreds(\"tabulous-sl-os-store\");\nvar configDB = require('./modules/config/database.js');\nvar options = {\n  mongos: {\n    ssl: true,\n    sslValidate: true,\n    sslCA: [fs.readFileSync('private/cert.pem')] // cert from compose.io dashboard\n  }\n}\n\nmongoose.connect(configDB.url(appEnv), options); // connect to our database\n\n// set the view engine to ejs\napp.set('view engine', 'ejs');\n\nrequire('./modules/config/passport')(passport);\n\nvar __dirname = path.resolve(path.dirname());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/bower_components',  express.static(__dirname + '/bower_components'));\napp.set(path.join('views', __dirname, 'public'));\nif(process.env.NODE_ENV == 'production'){\n  app.set('port', process.env.VCAP_APP_PORT || 80);\n}else{\n  app.set('port', 3000);\n}\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(bodyParser.json());\n//app.use(cookieParser({ secret: process.env.SESSION_SECRET }));\n\n// required for passport\n//app.set('trust proxy', 1) // trust first proxy \napp.use(session({\n    secret: process.env.SESSION_SECRET,\n    resave: false,\n    saveUninitialized: true,\n    cookie: {}\n}));\n\napp.use(passport.initialize());\napp.use(passport.session()); // persistent login sessions\napp.use(flash()); // use connect-flash for flash messages stored in session\napp.use(require(\"skipper\")());\n\nrequire('./routes.js')(app, passport, softlayerObjStoreCreds); // load our routes and pass in our app and fully configured passport\n\napp.listen(app.get('port'), function() {\n    var skipperSwift = require(\"skipper-openstack\")();\n    skipperSwift.ensureContainerExists(softlayerObjStoreCreds, softlayerObjStoreCreds.container, function (error) {\n      if (error) {\n        console.log(error);\n        console.log(\"unable to create default container\", softlayerObjStoreCreds.container);\n      }\n      else {\n        console.log(\"ensured default container\", softlayerObjStoreCreds.container, \"exists\");\n      }\n    });\n    console.info('Server listening on port ' + this.address().port);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./app.js\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"cfenv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cfenv\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"mongoose\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"passport\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"connect-flash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"connect-flash\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"express-session\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-session\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"babel-core/register\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-core/register\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"source-map-support\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"source-map-support\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = (function(){\n\tvar vcap = {\n\t\tservices:{\n\t\t    \"user-provided\": [\n\t\t        {\n\t\t            \"name\": \"tabulous-mongo\",\n\t\t            \"label\": \"user-provided\",\n\t\t            \"credentials\": {\n\t\t                \"uri\": process.env.TABULOUS_DB_URI,\n\t\t                \"port\": process.env.TABULOUS_DB_PORT,\n\t\t                \"user\": process.env.TABULOUS_DB_UN,\n\t\t                \"password\": process.env.TABULOUS_DB_PW\n\t\t            }\n\t\t        },\n\t\t        {\n\t\t        \t\"name\": \"tabulous-sl-os-store\",\n\t\t        \t\"label\": \"user-provided\",\n\t\t        \t\"credentials\": {\n\t\t        \t\t\"auth_url\": process.env.TABULOUS_OBJ_AUTH_URL,\n\t\t        \t\t\"userId\": process.env.TABULOUS_OBJ_UN,\n\t\t        \t\t\"password\": process.env.TABULOUS_OBJ_PW,\n\t\t        \t\t\"container\": process.env.TABULOUS_OBJ_CONTAINER\n\t\t        \t}\n\t\t        }\n\t\t    ]\n\t\t}\n\t}\n\treturn vcap;\n})();\n\n\n/** WEBPACK FOOTER **\n ** ./vcap-local.js\n **/","module.exports = {\n\t'url' : function(appEnv){\n\t\tvar mongoCreds = appEnv.getServiceCreds(\"tabulous-mongo\");\n\t\tmongoCreds.database = process.env.TABULOUS_DB;\n\t\treturn \"mongodb://\"+mongoCreds.user+\":\"+mongoCreds.password+\"@\"+mongoCreds.uri+\":\"+mongoCreds.port+\"/\"+mongoCreds.database+\"?ssl=true\";\n\t}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./modules/config/database.js\n **/","// load all the things we need\nvar FacebookStrategy = require('passport-facebook').Strategy;\n\n// load up the user model\nvar User       = require('../models/user');\n\n// load the auth variables\nvar configAuth = require('./auth');\n\nmodule.exports = function(passport) {\n\n    // used to serialize the user for the session\n    passport.serializeUser(function(user, done) {\n        done(null, user.id);\n    });\n\n    // used to deserialize the user\n    passport.deserializeUser(function(id, done) {\n        User.findById(id, function(err, user) {\n            done(err, user);\n        });\n    });\n\n    // =========================================================================\n    // FACEBOOK ================================================================\n    // =========================================================================\n    passport.use(new FacebookStrategy({\n\n        // pull in our app id and secret from our auth.js file\n        clientID        : configAuth.facebookAuth.clientID,\n        clientSecret    : configAuth.facebookAuth.clientSecret,\n        callbackURL     : configAuth.facebookAuth.callbackURL,\n        profileFields: ['id', 'name', 'email']\n\n    },\n\n    // facebook will send back the token and profile\n    function(token, refreshToken, profile, done) {\n        // asynchronous\n        process.nextTick(function() {\n\n            // find the user in the database based on their facebook id\n            User.findOne({ 'facebook.id' : profile.id }, function(err, user) {\n\n                // if there is an error, stop everything and return that\n                // ie an error connecting to the database\n                if (err)\n                    return done(err);\n\n                // if the user is found, then log them in\n                if (user) {\n                    return done(null, user); // user found, return that user\n                } else {\n                    // if there is no user found with that facebook id, create them\n                    var newUser            = new User();\n                    console.log(profile);\n                    // set all of the facebook information in our user model\n                    newUser.facebook.id    = profile.id; // set the users facebook id                   \n                    newUser.facebook.token = token; // we will save the token that facebook provides to the user                    \n                    newUser.facebook.name  = profile.name.givenName + ' ' + profile.name.familyName; // look at the passport user profile to see how names are returned\n                    newUser.facebook.first_name = profile.name.givenName;\n                    newUser.facebook.last_name = profile.name.familyName;\n                    newUser.facebook.email = profile.emails[0].value; // facebook can return multiple emails so we'll take the first\n\n                    // save our user to the database\n                    newUser.save(function(err) {\n                        if (err)\n                            throw err;\n\n                        // if successful, return the new user\n                        return done(null, newUser);\n                    });\n                }\n\n            });\n        });\n\n    }));\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/config/passport.js\n **/","module.exports = require(\"passport-facebook\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-facebook\"\n ** module id = 15\n ** module chunks = 0\n **/","// load the things we need\nvar mongoose = require('mongoose');\nvar bcrypt   = require('bcrypt-nodejs');\n\n// define the schema for our user model\nvar userSchema = mongoose.Schema({\n\n    local            : {\n        email        : String,\n        password     : String,\n    },\n    facebook         : {\n        id           : String,\n        token        : String,\n        email        : String,\n        name         : String,\n        first_name   : String,\n        last_name    : String\n    },\n    twitter          : {\n        id           : String,\n        token        : String,\n        displayName  : String,\n        username     : String\n    },\n    google           : {\n        id           : String,\n        token        : String,\n        email        : String,\n        name         : String\n    }\n});\n\n// methods ======================\n// generating a hash\nuserSchema.methods.generateHash = function(password) {\n    return bcrypt.hashSync(password, bcrypt.genSaltSync(8), null);\n};\n\n// checking if password is valid\nuserSchema.methods.validPassword = function(password) {\n    return bcrypt.compareSync(password, this.local.password);\n};\n\n// create the model for users and expose it to our app\nmodule.exports = mongoose.model('User', userSchema);\n\n\n/** WEBPACK FOOTER **\n ** ./modules/models/user.js\n **/","module.exports = require(\"bcrypt-nodejs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bcrypt-nodejs\"\n ** module id = 17\n ** module chunks = 0\n **/","// expose our config directly to our application using module.exports\nmodule.exports = {\n\n    'facebookAuth' : {\n        'clientID'      : process.env.FACEBOOK_CLIENT_ID, // your App ID\n        'clientSecret'  : process.env.FACEBOOK_CLIENT_SECRET, // your App Secret\n        'callbackURL'   : process.env.TABULOUS_FACEBOOK_CALLBACK\n    }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/config/auth.js\n **/","module.exports = require(\"skipper\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"skipper\"\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = function(app, passport, softlayerObjStoreCredentials) {\n    var path = require('path');\n    var __dirname = path.resolve(path.dirname());\n    var objStorage = require('./modules/object_storage/index.js');\n    var converter = require('./modules/conversion/index.js');\n\n    // route for home page\n    app.get('/', function(req, res){\n        res.render('index.ejs');\n    });\n\n    app.get('/canvas', isLoggedIn, function(req,res){\n        res.render('canvas.ejs', {\n            name : req.user.facebook.first_name,\n            newUser: true\n        });\n    });\n\n    // =====================================\n    // FACEBOOK ROUTES =====================\n    // =====================================\n    // route for facebook authentication and login\n    app.get('/auth/facebook', passport.authenticate('facebook', { scope : 'email' }));\n\n    // handle the callback after facebook has authenticated the user\n    app.get('/auth/facebook/callback',\n        passport.authenticate('facebook', {\n            successRedirect : '/canvas',\n            failureRedirect : '/'\n        }));\n\n    // route for logging out\n    app.get('/logout', function(req, res) {\n        req.logout();\n        res.redirect('/');\n    });\n\n    app.post('/upload', isLoggedIn, function(req, res){\n        objStorage.createObject(softlayerObjStoreCredentials,req,res);\n    });\n\n    app.post('/convert', function(req,res){\n        converter.toPDF(req,res);\n    });\n\n};\n\n// route middleware to make sure a user is logged in\nfunction isLoggedIn(req, res, next) {\n\n    // if user is authenticated in the session, carry on\n    if (req.isAuthenticated())\n        return next();\n\n    // if they aren't redirect them to the home page\n    res.redirect('/');\n}\n\n\n/** WEBPACK FOOTER **\n ** ./routes.js\n **/","var request = require('request');\nvar fs = require('fs');\nvar mimeTypes = require('mime-types');\nvar crypto = require('crypto');\nvar pkgcloud = require(\"pkgcloud\");\n\n/*\n\tTODO: set request URL automatically from token request\n*/\n\nmodule.exports = {\n\n\tcreateObject: function(credentials, req, res){\n\t\tcrypto.pseudoRandomBytes(16, function (err, raw) {\n\t\t\tvar filename = raw.toString('hex') + '.' + mimeTypes.extension(req.file('wireframe')._files[0].stream.headers['content-type']);\n\t\t\treq.file('wireframe')._files[0].stream.filename = filename;\n\t\t\treq.file('wireframe').upload({\n\t\t\t\tadapter: require('skipper-openstack'),\n\t\t\t\tcredentials: credentials,\n\t\t\t\tcontainer: credentials.container\n\t\t\t},function(err, uploadedFiles){\n\t\t\t\tif(err){\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\treturn res.json({\n\t\t\t\t\t\tsuccess: false,\n\t\t\t\t\t\terror: err\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('http://dal05.objectstorage.softlayer.net/v1/AUTH_14bda887-5925-4b06-a0f6-f872b024fec2/'+credentials.container+'/'+uploadedFiles[0].filename);\n\t\t\t\t\tres.json({\n\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\tpath: 'http://dal05.objectstorage.softlayer.net/v1/AUTH_14bda887-5925-4b06-a0f6-f872b024fec2/'+credentials.container+'/'+uploadedFiles[0].filename\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./modules/object_storage/index.js\n **/","module.exports = require(\"request\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = require(\"mime-types\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mime-types\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"crypto\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crypto\"\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = require(\"pkgcloud\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"pkgcloud\"\n ** module id = 25\n ** module chunks = 0\n **/","module.exports = require(\"skipper-openstack\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"skipper-openstack\"\n ** module id = 26\n ** module chunks = 0\n **/","\"use strict\";\n\nvar Rsvg = require('librsvg').Rsvg;\nvar request = require('request').defaults({ encoding: null });\nvar cfenv = require('cfenv');\nvar fs = require('fs');\nvar Readable = require('stream').Readable;\nrequire('babel-core/register');\n\n\nfunction parseSVG(svgText, resolve){\n\t\n\tlet svg, sections;\n\tlet svgStart;\n\tlet regex = /[^\\\"]*/;\n\t[svgStart, ...sections] = svgText.split(\"xlink:href=\\\"\");\n\n\tlet section = sections.shift();\n\t//extract the url from the start of the section\n\tlet url = section.match(regex)[0];\n\t//remove the url from the section\n\tsection = section.replace(url,'');\n\trequest.get(url, (error, response, body) => {\n\t\tif (!error && response.statusCode == 200) {\n\t\t\tlet data = \"data:\" + response.headers[\"content-type\"] + \";base64,\" + new Buffer(body).toString('base64');\n\t\t\tresolve(svgStart + \"xlink:href=\\\"\"+data+section);\n\t\t}\n\t});\n}\n\n\nmodule.exports = {\n\ttoPDF: function(req,res){\n\t\tlet svg = new Rsvg();\n\t\tlet svgText = req.body.svg;\n\t\tlet fileName = req.body.projectID;\n\t\tvar p = new Promise(resolve => {parseSVG(svgText, resolve)});\n\t\tp.then(results => {\n\t\t\tsvg.on('finish', function() {\n\t\t\t\tres.attachment(fileName+'.pdf');\n\t\t\t\tres.setHeader(\"Content-type\", \"application/force-download\");\n\t\t\t\tvar rs = Readable();\n\t\t\t\trs._read = function(){\n\t\t\t\t\trs.push(svg.render({\n\t\t\t\t\t\tformat: 'pdf',\n\t\t\t\t\t\twidth: svg.width,\n\t\t\t\t\t\theight: svg.height\n\t\t\t\t\t}).data);\n\t\t\t\t\trs.push(null);\n\t\t\t\t}\n\t\t\t\tconsole.log('Finished!');\n\t\t\t\trs.pipe(res);\n\t\t\t\t//res.end();\n\t\t\t});\n\t\t\tvar rs = Readable();\n\t\t\trs._read = function () {\n\t\t\t\trs.push(results);\n\t\t\t\trs.push(null);\n\t\t\t};\n\n\t\t\trs.pipe(svg);\n\t\t});\n\t}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./modules/conversion/index.js\n **/","module.exports = require(\"librsvg\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"librsvg\"\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = require(\"stream\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"stream\"\n ** module id = 29\n ** module chunks = 0\n **/"],"sourceRoot":""}